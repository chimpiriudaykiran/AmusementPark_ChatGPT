<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Fantasy Island - Signup</title>

    <!-- Custom fonts for this template-->
    <link href="/static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="../static/css/sb-admin-2.min.css" rel="stylesheet">


    <!-- Custom Css -->
    <link rel="stylesheet" href="/static/css/style.css" type="text/css" />

    <!-- Ionic icons -->
    <link href="https://unpkg.com/ionicons@4.2.0/dist/css/ionicons.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900" rel="stylesheet">
    <style>
        .icon-vector {
            display: flex;
            justify-content: center;
            width: 20px;
            height: 20px;
            margin: 5px;
            filter: brightness(0.85);
        }

        .icon-background {
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 20%;
            /* for a circular background */
        }
    </style>
</head>

<body>
    <!-- N A V B A R -->
    <nav class="navbar navbar-default navbar-expand-lg fixed-top custom-navbar">
        <div class="container" style="margin-left: 1px; max-width: 100%;height: 50px">
            <img src="../static/images/logo.png" class="img-fluid nav-logo-desktop" alt="Fantasy Island"
                style="width: 40px;">
            <ul class="navbar-nav ml-auto nav-right navbar_nav_custom" data-easing="easeInOutExpo" data-speed="1250"
                data-offset="65">
                <li class="nav-item nav-custom-link">
                    <a class="nav-link" href="/">Home <i class="icon ion-ios-arrow-forward icon-mobile"></i></a>
                </li>
                <li class="nav-item nav-custom-link">
                    <a class="nav-link" href="buy">Tickets <i
                            class="icon ion-ios-arrow-forward icon-mobile"></i></a>
                </li>
                <li class="nav-item nav-custom-link">
                    <a class="nav-link" href="mytrips">My Trips <i
                            class="icon ion-ios-arrow-forward icon-mobile"></i></a>
                </li>
                <li class="nav-item nav-custom-link">
                    <a class="nav-link" href="rides">Rides <i
                            class="icon ion-ios-arrow-forward icon-mobile"></i></a>
                </li>
                <li class="nav-item nav-custom-link">
                    <a class="nav-link" href="map">Park Map <i
                            class="icon ion-ios-arrow-forward icon-mobile"></i></a>
                </li>
                <li class="nav-item nav-custom-link">
                    <a class="nav-link" href="virtualq">Virtual-Q<i
                            class="icon ion-ios-arrow-forward icon-mobile"></i></a>
                </li>
                <li class="nav-item nav-custom-link">
                    <a class="nav-link" href="prediction">Time Prediction<i
                            class="icon ion-ios-arrow-forward icon-mobile"></i></a>
                </li>
                <li class="nav-item nav-custom-link">
                    <a class="nav-link" href="customerservices">Customer Services <i
                            class="icon ion-ios-arrow-forward icon-mobile"></i></a>
                </li>
                <li class="nav-item nav-custom-link">
                    <a class="nav-link" href="feedback">Feedback From<i
                            class="icon ion-ios-arrow-forward icon-mobile"></i></a>
                </li>


                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <img width="30" height="30"
                            src="https://img.icons8.com/doodle/96/user-male-circle.png" alt="user-male-circle" />
                    </a>
                    <!-- <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#" onclick="logout()">Logout</a>
                    </div> -->
                </li>


            </ul>
        </div>
    </nav>
    <!-- E N D  N A V B A R -->
    <div class="container" style="padding-top: 65px;width: 50%;">
        <div class="card o-hidden border-0 shadow-lg my-5">
            <div class="card-body p-0">
                <!-- Nested Row within Card Body -->
                <div class="row1">
                    <div class="col-lg-7">
                        <div class="p-5">
                            <div class="text-center">
                                <h1 class="h4 text-gray-900 mb-4">Create an Account!</h1>
                            </div>
                            <form class="user" id="registrationForm">
                                <div class="form-group">
                                    <label for="exampleInputEmail">Email Address</label>
                                    <input type="email" class="form-control form-control-user" id="exampleInputEmail"
                                        placeholder="Email Address" name="emailid">
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                        <label for="exampleFirstName">First Name</label>
                                        <input type="text" class="form-control form-control-user"
                                            id="exampleFirstName" placeholder="First Name" name="FirstName">
                                    </div>
                                    <div class="col-sm-6">
                                        <label for="exampleLastName">Last Name</label>
                                        <input type="text" class="form-control form-control-user"
                                            id="exampleLastName" placeholder="Last Name" name="LastName">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                        <label for="exampleInputPassword">Password</label>
                                        <input type="password" class="form-control form-control-user"
                                            id="exampleInputPassword" placeholder="Password" name="password">
                                    </div>
                                    <div class="col-sm-6">
                                        <label for="exampleRepeatPassword">Confirm Password</label>
                                        <input type="password" class="form-control form-control-user"
                                            id="exampleRepeatPassword" placeholder="Confirm Password"
                                            name="confirmPassword">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleDateOfBirth">Date of Birth</label>
                                    <input type="date" class="form-control form-control-user" id="exampleDateOfBirth"
                                        name="DateOfBirth">
                                </div>
                                <button type="submit" class="btn btn-primary btn-user btn-block">Register
                                    Account</button>
                            </form>


                            <hr>
                            <div class="text-center">
                                <a class="small" href="forgot-password.html">Forgot Password?</a>
                            </div>
                            <div class="text-center">
                                <a class="small" href="login.html">Already have an account? Login!</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="liveAlertPlaceholder" style="
            margin-top: 50px;
            right: 0px;
            float: right;
            width: 30%;
            position: absolute;
            top: 15px;
        "></div>

    </div>

    <!-- Bootstrap core JavaScript-->
    <script src="/static/vendor/jquery/jquery.min.js"></script>
    <!--    <script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>-->
    <!-- Core plugin JavaScript-->
    <script src="/static/vendor/jquery-easing/jquery.easing.min.js"></script>
    <!-- Custom scripts for all pages-->
    <script src="../static/js/sb-admin-2.min.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"
    ></script>
    <script
        src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"
    ></script>
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"
    ></script>
    <script>
        const alertPlaceholder = document.getElementById('liveAlertPlaceholder')
        const appendAlert = (message, type) => {
            const wrapper = document.createElement('div')
            wrapper.innerHTML = [
                `<div class="alert alert-${type} alert-dismissible" role="alert">`,
                `   <div>${message}</div>`,
                '   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
                '</div>'
            ].join('');
            alertPlaceholder.innerText = '';
            alertPlaceholder.append(wrapper)
        }


        document.getElementById('registrationForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent the form from submitting normally

            // Collect form data
            const formData = new FormData(this);

            // Check if passwords match
            const password = formData.get('password');
            const confirmPassword = formData.get('confirmPassword');
            if (password !== confirmPassword) {
                document.getElementById('errorMessage').textContent = 'Passwords do not match';
                return;
            }

            // Send POST request to backend
            fetch('/adduser', {
                method: 'POST',
                body: JSON.stringify(Object.fromEntries(formData)), // Convert FormData to JSON object
                headers: {
                    'Content-Type': 'application/json'
                }
            })
                .then(response => {
                    if (!response.ok) {
                        return response.json().then((responsetext) => {
                            console.error(responsetext.message);
                            appendAlert(responsetext.message, 'danger');
                            throw new Error(responsetext.message);
                        });
                    } else {
                        return response.json();
                    }
                })
                .then(data => {
                    // Handle successful response
                    console.log(data.message);
                    // Redirect to login page or do something else
                    window.location.href = 'login'; // Redirect to login page
                })
                .catch(error => {
                    // Handle error response
                    console.error(error.error);
                    document.getElementById('errorMessage').textContent = error.error;
                });
        });
    </script>
</body>

</html>
